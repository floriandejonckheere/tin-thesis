\chapter{Data stores}
\label{ch:data-stores}

\section{Selected data stores}
\label{sec:selected-data-stores}

% TODO: reference for large number
Due to the large number of active and maintained NoSQL data stores it is not feasible to consider all of them for this research.
We will consider every NoSQL category, discuss the use of the respective categories applied to the use case, and decide whether or not it will be included in the research.
In the applicable NoSQL categories the most popular data stores are selected, where popularity is based on certain predetermined parameters.

\textcite{DBEngine2018} maintains a list of database systems ranked by popularity, based on parameters such as number of mentions on websites, Google Trends and relevance in social networks.
% TODO: reference for LinkedIn and Upwork
These parameters are also cross-referenced with professional networks such as LinkedIn and Upwork using the number of available job offers and professional profiles.
This ranking is called the DB-Engine Ranking.
The list includes not only NoSQL databases but also other types of data storage systems such as relational database systems.

% TODO: reference for Gartner
The information technology division of Gartner maintains a yearly report on emerging relational and non-relational database technologies.
% TODO: elaborate

The DB-Engine Ranking is used primarily to determine which data stores are the most interesting to consider in this research.
The Magic Quadrant for Operational Database Management Systems was used as a secondary resource.
Due to licensing concerns regarding the Open Webslides project, database systems that do not fall under a free license as classified by the \textcite{FreeSoftwareFoundation1985} will not be considered.

% TODO: references
Certain categories of NoSQL data stores will not be considered.
Key-value stores will not be accounted for due to the relative simplicity of this type of data store.
The main use case of key/value stores is not storing more complex information, rather the emphasis lies more on scalability and consistency.
Processing complex queries that consist of the NoSQL equivalent of relational joins is not efficient in key-value data stores.
Implementing the proposed data model and queries in such a system is a more ambitious task that does not lie within the scope of the research.

Column-oriented data stores are a category of NoSQL data stores that is questionably useful in this case study.
% TODO: reference
These data stores are commonly seen as inverse relational database systems, where the storage of attributes per entity is more flexible regarding nullable values and unstructured information.
Column-oriented data stores are very efficient when retrieving a subset of columns for a certain record.
Since the data store will be deployed as additional data store next to the authoritative relational database, it will not contain any data that will not be used when querying the database.
This workflow cancels out the efficiency and usefulness of column-oriented data stores, and subsequently we will not consider this NoSQL category as a viable candidate.

Furthermore, comparison and application of NewSQL data stores will not be included in this paper either.
As described in \cref{ch:overview}, NewSQL aims to provide scalable performance similar to that of NoSQL while still guaranteeing ACID properties.
Since ACID is not a major concern for this use case, NewSQL does not provide significant advantage over NoSQL, and will therefore be omitted from the comparison.
Similarly, object-oriented and multi-model database such as OrientDB \autocite{OrientDB2010} are not within scope of this research.

In conclusion, document and graph data stores will provide the most beneficial data storage and are the main focus of this research.\\

The most popular document database systems according to the DB-Engine Ranking are MongoDB \autocite{MongoDB2009}, CouchDB \autocite{CouchDB2005} and Couchbase \autocite{Couchbase2010}.
While Couchbase is technically a multi-model data store, it is being ranked as a document database.
However, Couchbase is a conceptual merge between CouchDB and Membase, and mainly adds improved scalability, clustering and auto-sharding.
Couchbase will not be investigated upon in a practical capacity, however it is considered as an option to increase multi-host scalability.
This leads to MongoDB and CouchDB being the contestants in the document database system category.

Finally, as sole graph database the Neo4j system \autocite{Neo4j2007} stands out greatly over competitors in the ranking.
This database system will be analyzed as only graph database in this research.

In conclusion, the data stores included in the study will be MongoDB and CouchDB as document databases, and Neo4j as graph databases.

\section{Comparative study}
\label{sec:comparative-study}

Data stores and databases can be compared and analyzed using many quantitative and qualitative aspects.
In this section we propose a selection of criteria based on the usefulness applied to the studied use case.
Since the landscape and feature-set of NoSQL data stores is changing on a weekly base, the impact of these technologies must be carefully considered in order to reach a durable conclusion in this research.

The features of a data store that are taken into account in this comparative study are:

\begin{itemize}
  %% Features
  \item Querying capabilities
    \begin{itemize}
      \item Language
      \item Protocol
      \item MapReduce
    \end{itemize}

  %% Language
  \item Programming language
  \item Language bindings

  %% Integrity
  \item Integrity model
  \item Atomicity
  \item Revision control
  \item Consistency

  %% Scalability
  \item Persistence
  \item Partitioning
  \item High Availability
  \item Concurrency
  \item Replication

  %% Various
  \item License
  \item Commercial support
\end{itemize}

Certain aspects are not relevant to the presented use case because of various reasons.
Aspects omitted from the study are:

\begin{itemize}
  \item Security
  \item Compression
  \item Full-text search
  \item Geospatial functionality
  \item Cloud hosting
\end{itemize}

%% Omitted aspects
The specific use case described in this thesis does not focus on security, since the data store is not public facing and clients do not interact directly with it.
Security measures include but are not limited to authentication, authorization, encryption and auditing.
None of these are features that are required or useful for the comparison.
Authentication and authorization is functionality that is present in all databases.
It introduces the concept of multiple clients or roles connecting to a database, and assigning permissions to these clients in order to enforce permissions-based access.
However since there will only be one client connecting to the database - the platform itself - deeper integration with LDAP, ActiveDirectory or similar is superfluous and omitted from the comparison.

Encryption refers to the mechanism where data is encrypted and unreadable for unauthorized third parties.
Encryption in databases is threefold: encryption of data at rest, client-to-server communication and server-to-server communication \autocite{Grolinger2013}.
However, since data protection is a comprehensive topic, it does not fall within the scope of this research.
Consequently, encryption functionality is not considered in the comparative study.

Database auditing is a facility offered by the database management system that keeps track of the usage of database resources and authorization.
Operations on the database leave a trail of events, called an \textit{audit log}.
Similarly to authentication, the usefulness of this functionality is somewhat lost when there is only one client operating on the database.
However, many security standards such as PCI-DSS and HIPAA require the existance of an audit log.

Compression of data in the database is not included in the comparison.
Builtin compression may provide additional storage space but as it is a disk space-CPU usage tradeoff we have chosen to only consider CPU usage.
Akin to compression, we leave the choice of cloud hosting up to the database administrator.

Full-text search and geospatial functions are provided by certain data stores, however these features are not used by the platform and subsequently are not relevant to this comparative study.\\

%% Comparative study

\begin{landscape}
  \input{tables/01-querying-language}
\end{landscape}

\begin{landscape}
  \input{tables/02-integrity}
\end{landscape}

\begin{landscape}
  \input{tables/03-scalability}
\end{landscape}

\begin{landscape}
  \input{tables/04-hosting}
\end{landscape}

Table \ref{tbl:hosting} provides insight into the aspects related to hosting one or more database instances.
First, the type of license is important when hosting the data store.
Since we have restricted our research to licenses classified as free by the \textcite{FreeSoftwareFoundation1985}, none of these data stores prevent hosting instances without incurring additional licensing costs.
However, for two out of three data stores commercial support is available as well.
Commercial support includes licensing the product for enterprise use, which usually includes additional functionality -- commonly related to scalability -- and customer support.

MongoDB is dual-licensed.
% https://www.gnu.org/licenses/agpl-3.0.en.html
% https://www.apache.org/licenses/LICENSE-2.0
The database management system itself is licensed under the GNU Affero General Public License version 3.
The language bindings -- called drivers -- while officially supported are licensed under a different license, the Apache license

% https://www.gnu.org/licenses/why-affero-gpl.en.html
The GNU Affero General Public License version 3 is a modified version of the GNU General Public License version 3.
The GNU General Public License requires developers that modify software licensed under the GPL to distribute their modifications as well.
However, the license does not cover the case of service providers: if a developer modifies the source code and runs the software on a server, allowing other users to interact with it, distribution of the modified source code is not required.
The AGPL adds a provision to prevent this loophole.
Whenever a modified version of software licensed under the AGPL runs on a server, the modified source code must be available to download.
In the case of data stores, this makes sure that the software remains free and cannot be commercially exploited.

CouchDB, being an Apache project, is licensed under the Apache license.

The Neo4j graph store is dual-licensed as well: the Community Edition is licensed under the GPL version 3, and the Enterprise edition is licensed under the AGPL version 3.\\
Deciding on data store hosting is a difficult topic, which is not within the scope of this research.
We merely enumerate the options available for every data store.
Since all products are licensed under a free license, it is possible for invididuals and companies to host instances themselves.
MongoDB and Neo4j provide commercial support for this use case.
However, running a data store instance can also be outsourced to a plethora of companies and hosting providers.
Both MongoDB and Neo4j integrate with various cloud providers such as Amazon EC2, Google Cloud Platform or the Digital Ocean hosting platform.\\

%% Conclusion
